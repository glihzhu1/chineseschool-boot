<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition template="/templates/layout.xhtml">
  <ui:define name="content">
    <ui:include src="../include/familystudents.xhtml" />
    
    <p:dialog id="createDialog" header="#{messages.label_create} Family" modal="true" widgetVar="createDialogWidget" dynamic="true" visible="#{familyBean.createDialogVisible}" resizable="true" maximizable="true" showEffect="fade" hideEffect="explode">
      <p:ajax event="close" update=":dataForm:data" listener="#{familyBean.handleDialogClose}" />
      <p:outputPanel id="createPanel">
        <h:form id="createForm" enctype="multipart/form-data">
          <h:panelGrid id="createPanelGrid" columns="1" styleClass="dialog" columnClasses="col1,col1,col1,col1,col1" >
          	<h:panelGrid columns="1" styleClass="dialog">
	          	<h:outputLabel value="User Login Information" style="color:red"/>
            </h:panelGrid>
            <h:panelGrid columns="5" styleClass="dialog" columnClasses="col1,col1,col1,col1,col1" >
	          	<h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="username" value="#{familyBean.familyLogin}"  
		          		requiredMessage="Username is required" required="true"/>
		      		<p:watermark for="username" value="Username (required)" 
		      			id="watermarkUsername" />
		            <p:message for="username"></p:message>
	            </h:panelGrid>
	            
	            <p:spacer width="10" height="10"></p:spacer>
	            
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		            <h:inputText requiredMessage="Password is required" id="password"
		            	value="#{familyBean.familyPassword}" required="true">
		        	</h:inputText>
		        	<p:watermark for="password" value="Password (required)" id="watermarkPassword" />
		        	<p:message for="password"></p:message>
	        	</h:panelGrid>
	        	
	        	<p:spacer width="10" height="10"></p:spacer>
	            
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		            <h:inputText requiredMessage="Email is required" id="familyemail"
		            	value="#{familyBean.family.email}" 
		            	validatorMessage="email format is invalid" required="true">
                		<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
		        	</h:inputText>
		        	<p:watermark for="familyemail" value="Login Email (required)" id="watermarkEmail" />
		        	<p:message for="familyemail"></p:message>
	      		</h:panelGrid>
      		</h:panelGrid>
      		
      		<br/>
      		
      		<h:panelGrid columns="1" styleClass="dialog">
	          	<h:outputLabel value="Father Information (at least one parent information is needed)" style="color:red"/>
            </h:panelGrid>
            <h:panelGrid columns="5" styleClass="dialog" columnClasses="col1,col1,col1,col1,col1" >
	          	<h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="fatherfirstname" value="#{familyBean.family.fatherfirstname}"/>
		      		<p:watermark for="fatherfirstname" value="First Name"/>
		            <p:message for="fatherfirstname"></p:message>
	            </h:panelGrid>
	            <p:spacer width="10" height="10"></p:spacer>
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="fatherlastname" value="#{familyBean.family.fatherlastname}"/>
		      		<p:watermark for="fatherlastname" value="Last Name"/>
		            <p:message for="fatherlastname"></p:message>
	            </h:panelGrid>
	            <p:spacer width="10" height="10"></p:spacer>
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="fatherchinesename" value="#{familyBean.family.fatherchinesename}"/>
		      		<p:watermark for="fatherchinesename" value="Chinese Name"/>
		            <p:message for="fatherchinesename"></p:message>
	            </h:panelGrid>
      		</h:panelGrid>
      		
      		<h:panelGrid columns="1" styleClass="dialog">
	          	<h:outputLabel value="Mother Information" style="color:red"/>
            </h:panelGrid>
            <h:panelGrid columns="5" styleClass="dialog" columnClasses="col1,col1,col1,col1,col1" >
	          	<h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="motherfirstname" value="#{familyBean.family.motherfirstname}"/>
		      		<p:watermark for="motherfirstname" value="First Name"/>
		            <p:message for="motherfirstname"></p:message>
	            </h:panelGrid>
	        	<p:spacer width="10" height="10"></p:spacer>
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="motherlastname" value="#{familyBean.family.motherlastname}"/>
		      		<p:watermark for="motherlastname" value="Last Name"/>
		            <p:message for="motherlastname"></p:message>
	            </h:panelGrid>
	            <p:spacer width="10" height="10"></p:spacer>
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="motherchinesename" value="#{familyBean.family.motherchinesename}"/>
		      		<p:watermark for="motherchinesename" value="Chinese Name"/>
		            <p:message for="motherchinesename"></p:message>
	            </h:panelGrid>
      		</h:panelGrid>
      		
      		<br/>
      		<h:panelGrid columns="1" styleClass="dialog">
	          	<h:outputLabel value="Address Information" style="color:red"/>
            </h:panelGrid>
            <h:panelGrid columns="5" styleClass="dialog" columnClasses="col1,col1,col1,col1,col1" >
	          	<h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="address1" value="#{familyBean.family.address1}"
		          		requiredMessage="Address is required" required="true"/>
		      		<p:watermark for="address1" value="Address (required)"/>
		            <p:message for="address1"></p:message>
	            </h:panelGrid>
	            
	            <p:spacer width="10" height="10"></p:spacer>
	            
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="addresscity" value="#{familyBean.family.city}"
		          		requiredMessage="City is required" required="true"/>
		      		<p:watermark for="addresscity" value="City (required)"/>
		            <p:message for="addresscity" style="color:red"></p:message>
	            </h:panelGrid>
	        	
	        	<h:outputText value="  IL  " />
	            
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="addresszip" value="#{familyBean.family.zip}"
		          	  maxlength="5" requiredMessage="Zip code is required" required="true"/>
		      		<p:watermark for="addresszip" value="Zip Code(required - 5 digits)"/>
		            <p:message for="addresszip" style="color:red"></p:message>
	            </h:panelGrid>
      		</h:panelGrid>
      		
      		<br/>
      		
      		<h:panelGrid columns="1" styleClass="dialog">
	          	<h:outputLabel value="Contact Information (At least one phone information is needed)" style="color:red"/>
            </h:panelGrid>
            <h:panelGrid columns="5" styleClass="dialog" columnClasses="col1,col1,col1,col1,col1" >
	          	<h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="homephone" validatorMessage="invalid Home Phone format"
		          		maxlength="10" value="#{familyBean.family.homephone}">
		          		<f:validateRegex pattern="^([+]?[\d]+)?$" />
		          	</h:inputText>
		      		<p:watermark for="homephone" value="Home Phone"/>
		            <p:message for="homephone"></p:message>
	            </h:panelGrid>
	            
	            <p:spacer width="10" height="10"></p:spacer>
	            
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="cellphone" validatorMessage="invalid Cell Phone format" 
		          		maxlength="10" value="#{familyBean.family.cellphone}">
		          		<f:validateRegex pattern="^([+]?[\d]+)?$" />
		          	</h:inputText>
		      		<p:watermark for="cellphone" value="Cell Phone"/>
		      		<p:message for="cellphone"></p:message>
	            </h:panelGrid>
	        	
	        	<p:spacer width="10" height="10"></p:spacer>
	            
	            <h:panelGrid columns="3" styleClass="dialog" columnClasses="col1,col2,col3" >
		          	<h:inputText id="secondaryemail" value="#{familyBean.family.xilinemail}"
		          		validatorMessage="secondary email format is invalid">
                		<f:validateRegex pattern="^([_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,}))?$" />
                	</h:inputText>
		      		<p:watermark for="secondaryemail" value="Secondary Email"/>
		      		<p:message for="secondaryemail"></p:message>
	            </h:panelGrid>
      		</h:panelGrid>
      		
      		
      	  </h:panelGrid>
          
          <p:commandButton id="createSaveButton" value="#{messages.label_save}" 
            oncomplete="PF('createDialogWidget').hide()"
            action="#{familyBean.persist}" update="createPanelGrid :growlForm:growl" />
          <p:commandButton id="createCloseButton" value="#{messages.label_close}" 
            onclick="PF('createDialogWidget').hide()" type="button" />
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
      </p:outputPanel>
    </p:dialog>
    
    <p:confirmDialog id="deactivateDialog" widgetVar="deactivateDialogWidget" message="#{messages.label_deactivate_record}" showEffect="fade" hideEffect="explode" header="#{messages.label_confirm_deactivation}" severity="alarm">
      <p:outputPanel id="deactivatePanel">
        <h:form id="deactivateForm">
          <p:commandButton id="deactivateYesButton" value="#{messages.label_yes}" action="#{familyBean.deactivateFamily}" update=":dataForm:data :growlForm:growl" oncomplete="PF('deactivateDialogWidget').hide()" />
          <p:commandButton id="deactivateNoButton" value="#{messages.label_no}" onclick="PF('deactivateDialogWidget').hide()" type="button" />
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
      </p:outputPanel>
    </p:confirmDialog>
    
    <ui:include src="../include/familyactiondialogs.xhtml" />
    
    
    
    
    
    <p:confirmDialog id="processOrderedbookDialog" widgetVar="processOrderedbookDialogWidget" message="#{messages.label_process_record}" showEffect="fade" hideEffect="explode" header="#{messages.label_confirm_process}" severity="alarm">
      <p:outputPanel id="processOrderedbookPanel">
        <h:form id="processOrderedbookForm">
          <p:commandButton id="processOrderedbookYesButton" value="#{messages.label_yes}" action="#{familyBean.processBoughtBook}" 
          	update=":orderbookForm:orderbookPanelGrid" 
          	oncomplete="PF('processOrderedbookDialogWidget').hide()" />
          <p:commandButton id="processOrderedbookNoButton" value="#{messages.label_no}" onclick="PF('processOrderedbookDialogWidget').hide()" type="button" />
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
      </p:outputPanel>
    </p:confirmDialog>
    <p:confirmDialog id="returnOrderedbookDialog" widgetVar="returnOrderedbookDialogWidget" message="#{messages.label_return_record}" showEffect="fade" hideEffect="explode" header="#{messages.label_confirm_return}" severity="alarm">
      <p:outputPanel id="returnOrderedbookPanel">
        <h:form id="returnOrderedbookForm">
          <p:commandButton id="returnOrderedbookYesButton" value="#{messages.label_yes}" action="#{familyBean.returnBoughtBook}" 
          	update=":orderbookForm:orderbookPanelGrid" 
          	oncomplete="PF('returnOrderedbookDialogWidget').hide()" />
          <p:commandButton id="returnOrderedbookNoButton" value="#{messages.label_no}" onclick="PF('returnOrderedbookDialogWidget').hide()" type="button" />
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
      </p:outputPanel>
    </p:confirmDialog>
    
    
	
    
    
    
    <p:dialog id="createPaymentDialog" header="#{messages.label_create} Billing Record" modal="true" widgetVar="createPaymentDialogWidget" dynamic="true" resizable="true" maximizable="true" showEffect="fade" hideEffect="explode">
      <p:outputPanel id="createPaymentPanel">
        <h:form id="createPaymentForm" enctype="multipart/form-data">
          <h:panelGrid id="createPaymentPanelGrid" columns="1" styleClass="dialog">
          	<h:panelGrid columns="1" styleClass="dialog">
	          	<h:outputLabel value="Bill Type: " style="color:red"/>
            </h:panelGrid>
            <h:panelGrid columns="2" styleClass="dialog">
	            <p:selectOneRadio value="#{familyBean.familybilling.billingtype}">
					<p:ajax event="change" update="checknumarea" listener="#{familyBean.listenerShowChecknum}" /> 
		            <f:selectItem itemLabel="Payment " itemValue="PAYMENT" />
		            <f:selectItem itemLabel=" Credit " itemValue="CREDIT" />
		            <f:selectItem itemLabel=" Refund " itemValue="REFUND" />
		            <f:selectItem itemLabel=" Fine" itemValue="FINE" />
		        </p:selectOneRadio>
	            <p:panel columns="3" style="border:none;"
	            	widgetVar="checknumarea" id="checknumarea" visible="#{familyBean.showChecknum}" >
		          	<h:outputText value=" Check Number: "/>
	          		<h:inputText id="checknum" required="#{familyBean.showChecknum}" requiredMessage="Check number is required"
		          		value="#{familyBean.familybilling.checknum}"/>
		          	<p:message for="checknum"></p:message>
	            </p:panel>
      		</h:panelGrid>
            <h:panelGrid columns="7" styleClass="dialog">
            	<h:panelGrid columns="1" styleClass="dialog">
		          	<h:outputText value="Amount"/>
	          		<h:inputText id="paymentamount" required="true" requiredMessage="Payment amount is required"
		          		value="#{familyBean.familybilling.amount}"/>
		            <p:message for="paymentamount"></p:message>
	            </h:panelGrid>
	            
	            <p:spacer width="10" height="10"></p:spacer>
	            <h:panelGrid columns="1" styleClass="dialog">
	          		<h:outputText value="Process Date"/>
	          		<p:calendar id="processtime" 
	          			value="#{familyBean.familybilling.processtime.time}" pattern="MM/dd/yyyy" />
      		  	</h:panelGrid>
      		  	<p:spacer width="10" height="10"></p:spacer>
	            <h:panelGrid columns="1" styleClass="dialog">
		          	<h:outputText value="Description"/>
		          	<h:inputText id="description" 
		          		value="#{familyBean.familybilling.description}"/>
	            </h:panelGrid>
      		</h:panelGrid>
      	  </h:panelGrid>
          
          <p:commandButton value="#{messages.label_save}" action="#{familyBean.persistPayment}" update=":processPaymentForm:processPaymentPanelGrid :growlForm:growl" />
          <p:commandButton value="#{messages.label_close}" onclick="PF('createPaymentDialogWidget').hide()" type="button" />
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
      </p:outputPanel>
    </p:dialog>
    
    <p:confirmDialog id="deletePaymentDialog" widgetVar="deletePaymentDialogWidget" message="#{messages.label_delete_record}" showEffect="fade" hideEffect="explode" header="#{messages.label_confirm_deletion}" severity="alarm">
      <p:outputPanel id="deletePaymentPanel">
        <h:form id="deletePaymentForm">
          <p:commandButton id="deletePaymentYesButton" value="#{messages.label_yes}" action="#{familyBean.deletePayment}" 
          	update=":processPaymentForm:processPaymentPanelGrid" 
          	oncomplete="PF('deletePaymentDialogWidget').hide()" />
          <p:commandButton id="deletePaymentNoButton" value="#{messages.label_no}" onclick="PF('deletePaymentDialogWidget').hide()" type="button" />
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
      </p:outputPanel>
    </p:confirmDialog>
  </ui:define>
</ui:composition>
</html>